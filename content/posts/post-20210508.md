---
title: "メモ: Github Pagesで作ったWebサイトがGoogle検索で見つかるようにする"
date: 2021-05-08T17:35:51+09:00
description: "Google AnalyticsとGoogle Search Consoleとに登録してGithub Pages (Hugo, Archie)で作ったWebサイトをGoogle検索で見つかるようにしたメモ。"
tags: [github, hugo]
---

どうやらGithub Pagesで作ったWebページはデフォルトでGoogle検索で引っかからないらしい。
実際サイト名などで検索しても引っかかってくれてないっぽい。
せっかく作ったWebページなのに興味ある人の目に触れにくい状態なのはもったいないので、以下やったことのメモを記す。

- [GitHub Pagesで作ったブログをGoogle検索にヒットさせる - 寝室コンピューティング](https://www.bedroomcomputing.com/2020/04/2020-0408-googleconsole/)
- [Hugoサイトに最新版のGoogle Analyticsのタグを埋め込む - Helve Tech Blog](https://helve-blog.com/posts/web-technology/hugo-google-analytics-tag/)

上記2つのWebページにある手順に基本的には従った。

ここに記されていることはあくまで**やったこと**であり、目的を達成する上で十分だとは思われるが必要なのかどうかは不明。


# Google Analytics
[Google Analytics](https://analytics.google.com/analytics/web/)で登録する。
今回が利用が初めてだったため
1. 適当に「アカウント名」を決め、「アカウントのデータ共有設定」の選択
2. 「プロパティ名」に目的のサイト名を入力し、「タイムゾーン」・「通貨」の設定を日本に
3. 「次へ」を押す前に、念の為「**詳細プションのを表示**」をクリックし、目的のサイトのURLを入力
4. ビジネス情報にて「業種」・「ビジネスの規模」・「利用目的」を適宜選択
5. 「作成」をクリック
の手順で一応の設定は完了。

アナリティクスの画面にある「管理」から、「プロパティ名」に入力した名称のプロパティの「トラッキング情報/トラッキングコード」へ移動。
「グローバルサイトタグ（gtag.js）」を確認しておく。


# Hugo側の設定（Archieの場合）
Archieでは`config.toml`にある`googleAnalytics`にトラッキングIDを設定することになっている。
しかしこれだけではGoogle Search Consoleの設定との接続が良くない。

行儀がよろしくないとは思われるが`themes/archie/layouts/partials/header.html`の`</head>`直前くらいに
```html
<!-- Analytics -->
{{ if not .Site.IsServer }}
{{ partial "google-analytics" . }}
{{ end }}
```
を追記しておく。
次に`themes/archie/layouts/partials/google-analytics.html`を作り、上で確認した「グローバルサイトタグ（gtag.js）」を書き込む。
```html
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-YourTracking-Id"></script>
<script>
 window.dataLayer = window.dataLayer || [];
 function gtag(){dataLayer.push(arguments);}
 gtag('js', new Date());

 gtag('config', 'UA-YourTracking-Id');
</script>

```
のようになっていると思われる（例のためにトラッキングIDの部分を`UA-YourTracking-Id`に書き換えてある）。

この状態で`hugo`を実行するなどして事前にWebページの生成を行なう。
ホームページのソースを見て、上記のコードに対応する部分がヘッダーにあることを確認する。

またHugoではデフォルトでサイトマップ`sitemap.xml`が生成されていると思われるので、生成されないように設定しているのであれば外しておく。


# Google Search Console
[Google Search Console へようこそ](https://search.google.com/search-console/welcome)の「URLプレフィックス」に目的のWebサイトのURLを入力する。
上述のGoogle AnalyticsとHugoの設定がうまく行っていればそのままサイトの所有権が認証される。
認証されなくても、別の認証方法が選択肢が表示されるので可能なものを選択する。

認証されたプロパティのサイドバーの「サイトマップ」へ移動する。
サイトマップへのURLを貼り付けて「送信」する。
とくに設定の変更を行なっていなければ`(url)/sitemap.xml`でサイトマップが確認できると思われる。
